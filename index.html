<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Moon Byul Schedule</title>

  <style>
    :root{
      --bg:#f6f7fb;
      --card:#ffffff;
      --line:#e6e8f0;
      --text:#111827;
      --muted:#6b7280;

      /* ìœ í˜•ë³„ ìƒ‰ (ì›í•˜ë©´ ë°”ê¿”ë„ ë¨) */
      --youtube:#ef4444;
      --sns:#0ea5e9;
      --concert:#a855f7;
      --event:#f59e0b;
      --live:#22c55e;
      --album:#6366f1;

      --shadow: 0 6px 20px rgba(17,24,39,0.06);
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto,
                   Apple SD Gothic Neo, Noto Sans KR, sans-serif;
      background:var(--bg);
      color:var(--text);
    }

    .wrap{
      max-width:980px;
      margin:0 auto;
      padding:16px;
    }

    header{
      display:flex;
      justify-content:space-between;
      align-items:flex-end;
      gap:12px;
      margin:10px 0 14px;
    }

    h1{
      margin:0;
      font-size:22px;
      letter-spacing:0.2px;
    }

    .sub{
      margin-top:4px;
      font-size:13px;
      color:var(--muted);
    }

    .bar{
      display:flex;
      align-items:center;
      gap:10px;
    }

    button{
      background:var(--card);
      color:var(--text);
      border:1px solid var(--line);
      padding:10px 14px;
      border-radius:12px;
      cursor:pointer;
      touch-action:manipulation;
    }

    button:active{ transform:scale(0.98); }

    .month{
      min-width:150px;
      text-align:center;
      font-weight:700;
    }

    .grid{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:18px;
      overflow:hidden;
      box-shadow: var(--shadow);
    }

    /* âœ… ì¹¸ ë„ˆë¹„ê°€ ìµœëŒ€í•œ ì¼ì •í•˜ê²Œ ë³´ì´ë„ë¡: í¼ì„¼íŠ¸ ê³ ì • */
    .dow, .cal{
      display:grid;
      grid-template-columns: repeat(7, 14.285714%);
      width:100%;
    }

    .dow{
      background:#fafafa;
      border-bottom:1px solid var(--line);
    }

    .dow div{
      padding:10px 12px;
      font-size:12px;
      color:var(--muted);
    }

    .cell{
      min-height:112px;
      padding:10px 10px 8px;
      border-right:1px solid var(--line);
      border-bottom:1px solid var(--line);
      position:relative;
      user-select:none;
    }

    .cell:nth-child(7n){ border-right:none; }

    .other-month{
      background:rgba(0,0,0,0.02);
      color:rgba(17,24,39,0.45);
    }

    .day{
      font-size:13px;
      color:var(--muted);
    }

    .today{
      outline:2px solid rgba(124,58,237,0.28);
      outline-offset:-2px;
    }

    .selected{
      outline:2px solid rgba(124,58,237,0.55);
      outline-offset:-2px;
      background:rgba(124,58,237,0.05);
    }

    /* âœ… ë‹¬ë ¥ ì•ˆì—ëŠ” ì ë§Œ í‘œì‹œ */
    .dots{
      margin-top:10px;
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      align-items:center;
    }

    .dot{
      width:9px;
      height:9px;
      border-radius:999px;
      display:inline-block;
    }

    .more{
      font-size:11px;
      color:var(--muted);
      background:#f3f4f6;
      border:1px solid var(--line);
      padding:2px 6px;
      border-radius:999px;
    }

    /* âœ… ì•„ë˜ ìƒì„¸ ì˜ì—­ */
    .details{
      margin-top:12px;
      background:var(--card);
      border:1px solid var(--line);
      border-radius:18px;
      box-shadow: var(--shadow);
      padding:14px;
    }

    .details-head{
      display:flex;
      justify-content:space-between;
      align-items:baseline;
      gap:10px;
      margin-bottom:10px;
    }

    .details-title{
      margin:0;
      font-size:15px;
      font-weight:800;
    }

    .legend{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      justify-content:flex-end;
      color:var(--muted);
      font-size:11px;
    }

    .lg{
      display:flex;
      align-items:center;
      gap:6px;
      padding:4px 8px;
      border:1px solid var(--line);
      background:#fafafa;
      border-radius:999px;
    }

    .items{
      display:flex;
      flex-direction:column;
      gap:8px;
    }

    .item{
      display:flex;
      gap:10px;
      align-items:flex-start;
      padding:10px 12px;
      border:1px solid var(--line);
      background:#fbfbfd;
      border-radius:14px;
    }

    .item-left{
      min-width:56px;
      font-size:12px;
      color:var(--muted);
    }

    .item-main{
      flex:1;
      min-width:0;
    }

    .item-title{
      font-size:13px;
      font-weight:700;
      margin:0;
      line-height:1.25;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    .item-meta{
      margin-top:4px;
      font-size:12px;
      color:var(--muted);
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:3px 8px;
      border-radius:999px;
      border:1px solid var(--line);
      background:#fff;
      font-size:11px;
      color:var(--text);
    }

    a.link{
      color:#2563eb;
      text-decoration:none;
      font-size:12px;
    }
    a.link:hover{ text-decoration:underline; }

    footer{
      margin-top:14px;
      font-size:12px;
      color:var(--muted);
      line-height:1.6;
    }

    /* âœ… ëª¨ë°”ì¼ ìµœì í™” */
    @media (max-width:640px){
      .wrap{ padding:12px; }

      header{
        flex-direction:column;
        align-items:flex-start;
        gap:10px;
      }

      h1{ font-size:20px; }

      .bar{
        width:100%;
        justify-content:space-between;
      }

      .month{ min-width:auto; flex:1; }

      button{
        padding:12px 14px;
        border-radius:14px;
      }

      .cell{
        min-height:78px;
        padding:8px;
      }

      .day{ font-size:12px; }

      .dots{ margin-top:8px; gap:5px; }
      .dot{ width:8px; height:8px; }

      .details{ padding:12px; }
      .item{ padding:10px; }
      .item-left{ min-width:48px; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div>
        <h1>ğŸŒ™ Moon Byul Schedule</h1>
        <div class="sub">ë¹„ê³µì‹ íŒ¬ ìŠ¤ì¼€ì¤„ ì •ë¦¬</div>
      </div>

      <div class="bar">
        <button id="prev" aria-label="ì´ì „ ë‹¬">â—€</button>
        <div class="month" id="monthLabel"></div>
        <button id="next" aria-label="ë‹¤ìŒ ë‹¬">â–¶</button>
      </div>
    </header>

    <section class="grid">
      <div class="dow">
        <div>ì¼</div><div>ì›”</div><div>í™”</div>
        <div>ìˆ˜</div><div>ëª©</div><div>ê¸ˆ</div><div>í† </div>
      </div>
      <div class="cal" id="calendar"></div>
    </section>

    <section class="details" id="details">
      <div class="details-head">
        <h2 class="details-title" id="detailsTitle">ë‚ ì§œë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”</h2>

        <div class="legend">
          <span class="lg"><span class="dot" style="background:var(--youtube)"></span>ìœ íŠœë¸Œ</span>
          <span class="lg"><span class="dot" style="background:var(--sns)"></span>SNS</span>
          <span class="lg"><span class="dot" style="background:var(--concert)"></span>ê³µì—°</span>
          <span class="lg"><span class="dot" style="background:var(--event)"></span>í–‰ì‚¬</span>
          <span class="lg"><span class="dot" style="background:var(--live)"></span>ë¼ì´ë¸Œ</span>
          <span class="lg"><span class="dot" style="background:var(--album)"></span>ì•¨ë²”</span>
        </div>
      </div>

      <div class="items" id="detailsItems"></div>
    </section>

    <footer>
      â€» ë³¸ ì‚¬ì´íŠ¸ëŠ” ë¹„ê³µì‹ íŒ¬ì‚¬ì´íŠ¸ì´ë©° ëª¨ë“  ì¼ì •ì€ ê³µì‹ ì±„ë„ ê³µì§€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì •ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.
    </footer>
  </div>

  <script>
    /* =========================
       1) ì¼ì • ë°ì´í„°
       - date: "YYYY-MM-DD"
       - type: youtube | sns | concert | event | live | album
       - time: "HH:MM" (ì—†ìœ¼ë©´ ""ë¡œ)
       - title: í‘œì‹œëª…
       - link: (ì„ íƒ) ê³µì‹ ê³µì§€ ë§í¬
       - order: ê°™ì€ ì‹œê°„ëŒ€ ì •ë ¬ìš©(ì„ íƒ)
    ========================= */
    const events = [
      { date:"2026-01-07", type:"youtube", time:"18:00", title:"ìœ íŠœë¸Œ ì½˜í…ì¸  ì—…ë¡œë“œ", link:"" },
      { date:"2026-01-08", type:"sns",     time:"",      title:"SNS ì—…ë°ì´íŠ¸", link:"" },
      { date:"2026-01-10", type:"concert", time:"19:00", title:"ì½˜ì„œíŠ¸", link:"" },
      { date:"2026-01-13", type:"album",   time:"12:00", title:"OST ë°œë§¤", link:"" },
      { date:"2026-01-13", type:"live",    time:"21:00", title:"ë¼ì´ë¸Œ", link:"" },
    ];

    /* ìœ í˜• ë¼ë²¨/ìƒ‰ìƒ */
    const typeLabel = {
      youtube:"ìœ íŠœë¸Œ",
      sns:"SNS",
      concert:"ê³µì—°",
      event:"í–‰ì‚¬",
      live:"ë¼ì´ë¸Œ",
      album:"ì•¨ë²”",
    };

    const typeVar = {
      youtube:"--youtube",
      sns:"--sns",
      concert:"--concert",
      event:"--event",
      live:"--live",
      album:"--album",
    };

    const cal = document.getElementById("calendar");
    const monthLabel = document.getElementById("monthLabel");
    const detailsTitle = document.getElementById("detailsTitle");
    const detailsItems = document.getElementById("detailsItems");

    let view = new Date();
    view.setDate(1);

    let selectedKey = null;

    const pad = n => String(n).padStart(2, "0");
    const keyOf = d => `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())}`;

    function groupByDate(list){
      const map = {};
      for(const e of list){
        (map[e.date] ??= []).push(e);
      }
      return map;
    }

    function sortEvents(list){
      return [...list].sort((a,b)=>{
        const ta = a.time || "99:99";
        const tb = b.time || "99:99";
        if(ta !== tb) return ta.localeCompare(tb);
        return (a.order ?? 0) - (b.order ?? 0);
      });
    }

    function renderDetails(dateKey){
      selectedKey = dateKey;

      const d = new Date(dateKey + "T00:00:00");
      const title = `${d.getFullYear()}ë…„ ${d.getMonth()+1}ì›” ${d.getDate()}ì¼`;
      detailsTitle.textContent = title;

      const map = groupByDate(events);
      const list = sortEvents(map[dateKey] || []);

      detailsItems.innerHTML = "";

      if(list.length === 0){
        const empty = document.createElement("div");
        empty.style.color = "#6b7280";
        empty.style.fontSize = "13px";
        empty.style.padding = "10px 2px";
        empty.textContent = "ë“±ë¡ëœ ìŠ¤ì¼€ì¤„ì´ ì—†ì–´ìš”.";
        detailsItems.appendChild(empty);
        return;
      }

      for(const e of list){
        const item = document.createElement("div");
        item.className = "item";

        const left = document.createElement("div");
        left.className = "item-left";
        left.textContent = e.time ? e.time : "ì‹œê°„";

        const main = document.createElement("div");
        main.className = "item-main";

        const t = document.createElement("p");
        t.className = "item-title";
        t.textContent = e.title;

        const meta = document.createElement("div");
        meta.className = "item-meta";

        const pill = document.createElement("span");
        pill.className = "pill";
        const dot = document.createElement("span");
        dot.className = "dot";
        dot.style.background = `var(${typeVar[e.type] || "--album"})`;

        const lab = document.createElement("span");
        lab.textContent = typeLabel[e.type] || "ê¸°íƒ€";

        pill.appendChild(dot);
        pill.appendChild(lab);

        meta.appendChild(pill);

        if(e.link){
          const a = document.createElement("a");
          a.className = "link";
          a.href = e.link;
          a.target = "_blank";
          a.rel = "noopener noreferrer";
          a.textContent = "ì¶œì²˜ ë§í¬";
          meta.appendChild(a);
        }

        main.appendChild(t);
        main.appendChild(meta);

        item.appendChild(left);
        item.appendChild(main);

        detailsItems.appendChild(item);
      }
    }

    function renderCalendar(){
      cal.innerHTML = "";

      const year = view.getFullYear();
      const month = view.getMonth();
      monthLabel.textContent = `${year}ë…„ ${month+1}ì›”`;

      const map = groupByDate(events);

      const first = new Date(year, month, 1);
      const startDow = first.getDay();
      const start = new Date(year, month, 1 - startDow);

      const todayKey = keyOf(new Date());

      for(let i=0;i<42;i++){
        const d = new Date(start);
        d.setDate(start.getDate() + i);

        const key = keyOf(d);

        const cell = document.createElement("div");
        cell.className = "cell";

        if(d.getMonth() !== month) cell.classList.add("other-month");
        if(key === todayKey) cell.classList.add("today");
        if(selectedKey && key === selectedKey) cell.classList.add("selected");

        const day = document.createElement("div");
        day.className = "day";
        day.textContent = d.getDate();
        cell.appendChild(day);

        const list = map[key] || [];
        if(list.length){
          const dots = document.createElement("div");
          dots.className = "dots";

          const shown = list.slice(0, 4);
          for(const e of shown){
            const dot = document.createElement("span");
            dot.className = "dot";
            dot.style.background = `var(${typeVar[e.type] || "--album"})`;
            dots.appendChild(dot);
          }

          if(list.length > 4){
            const more = document.createElement("span");
            more.className = "more";
            more.textContent = `+${list.length-4}`;
            dots.appendChild(more);
          }

          cell.appendChild(dots);
        }

        /* âœ… ë‚ ì§œ í´ë¦­í•˜ë©´ ì•„ë˜ ë¦¬ìŠ¤íŠ¸ ê°±ì‹  */
        cell.addEventListener("click", ()=>{
          renderDetails(key);
          renderCalendar(); // ì„ íƒ í‘œì‹œ ì—…ë°ì´íŠ¸
        });

        cal.appendChild(cell);
      }
    }

    document.getElementById("prev").onclick = () => {
      view = new Date(view.getFullYear(), view.getMonth()-1, 1);
      selectedKey = null;
      detailsTitle.textContent = "ë‚ ì§œë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”";
      detailsItems.innerHTML = "";
      renderCalendar();
    };

    document.getElementById("next").onclick = () => {
      view = new Date(view.getFullYear(), view.getMonth()+1, 1);
      selectedKey = null;
      detailsTitle.textContent = "ë‚ ì§œë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”";
      detailsItems.innerHTML = "";
      renderCalendar();
    };

    /* ì²« ë Œë”: ì˜¤ëŠ˜ ë‚ ì§œ ìë™ ì„ íƒí•˜ê³  ì‹¶ìœ¼ë©´ ì•„ë˜ ë‘ ì¤„ ì‚¬ìš© */
    // selectedKey = keyOf(new Date());
    // renderDetails(selectedKey);

    renderCalendar();
  </script>
</body>
</html>
